{"version":3,"sources":["app.js","environment.js","main.js","components/User.js","components/bel-citation.js","components/bel-context-item.js","components/bel-context.js","components/bel-metadata.js","components/bel-nanopub.js","components/bel-statement.js","components/bel-term.js","components/footer.js","components/nav-bar.js","components/pubmed.js","components/search-export.js","resources/authentication.js","resources/openbelapi-client.js","resources/openbelapi-service.js","resources/pubmed-client.js","resources/pubmed-service.js","resources/relations-list.js","pages/about.js","pages/apilist.js","pages/edit.js","pages/help.js","pages/import.js","pages/search.js","pages/welcome.js","valueConverters/arrayify.js","valueConverters/keys-to-list.js","valueConverters/pipe-to-semicolon.js","valueConverters/sort-array.js","valueConverters/stringify.js"],"names":["logger","getLogger","App","user","router","userData","debug","configureRouter","config","title","map","route","moduleId","name","nav","activationStrategy","mapUnknownRoutes","navigateToRoute","inject","testing","configure","Promise","longStackTraces","warnings","wForgottenReturn","setLevel","logLevel","aurelia","use","standardConfiguration","plugin","developmentLogging","start","then","a","setRoot","User","test","BelCitation","attribute","changeHandler","defaultBindingMode","twoWay","defaultValue","undefined","openbelapiService","pubmedService","eventAggregator","api","ea","refreshNanopubObjBinding","temp","nanopub","publish","payload","attached","citation","id","citationId","type","collectPubmed","copyCitationId","lastCitationId","JSON","parse","stringify","nanopubChanged","value","getPubmed","pubmed","citationPubmedChecks","date","journalInfo","printPublicationDate","authors","bel","refString","catch","error","reason","$parent","mismatch","replaceCitationDate","newval","replaceCitationName","replaceCitationAuthors","BelContextItem","compositionTransaction","compositionTransactionNotifier","created","enlist","getBelAnnotationTypes","types","done","index","last","annotation","notifyAddBlank","hasTypeFocusChanged","newValue","filterTypes","showTypes","typeChanged","filteredTypes","filter","item","toLowerCase","indexOf","selectType","typeClear","selectedType","searchType","hasAnnotationFocusChanged","filterAnnotations","showAnnotations","annotationChanged","hasAnnotationFocus","length","getBELAnnotationValues","filteredAnnotations","data","selectAnnotation","annotation_value","annotationClear","BelContext","addBlank","subscription","subscribe","experiment_context","detached","dispose","last_item_idx","push","removeItem","idx","splice","BelMetadata","toastr","BelNanopub","determineActivationStrategy","replace","metadata","submitNanopub","annotations","bind","loadFormData","showPubmed","nanopubId","getBelNanopub","extractFormMetadata","getBelComponents","bel_statement","belSubject","comp","subject","belObject","object","belRelationship","relationship","Nanopub","prepareNanopub","obj","addFormMetadata","key","findIndex","k","submitUpdate","loadBelNanopub","success","options","submitNew","response","headers","get","location","getIdFromUrl","Object","assign","BelStatement","relationships","getRelationships","context","belSubjectChanged","belsubject","BelTerm","OpenbelapiService","loading","focused","hasFocus","belChanged","selectedTerm","cursor","belinput","selectionEnd","getBelCompletions","filteredTerms","results","showTerms","blurred","selectTerm","term","setSelectionRange","focus","Footer","NavBar","auth","authEnabled","checkToken","action","getSelectedOpenbelApiUrl","getBelVersion","belVersion","version","selectedCB","endpointName","subscription1","updatedClientCB","subscription2","navbarAction","removeToken","info","window","href","origin","authenticate","protocol","host","pathname","hash","selectedOpenbelApiUrl","localStorage","getItem","Pubmed","getPubMed","SearchExport","authentication","dataType","media_type","extension","dataTypes","updateExportUrl","exportUrl","updateQueryString","getToken","searchUrlChanged","newvalue","searchUrl","setDataType","url","re","RegExp","split","separator","Authentication","loginUrl","cleanHash","setToken","token","setItem","getPayload","base64Url","base64","decodeURIComponent","escape","atob","isAuthenticated","isString","logout","redirect","tokenName","resolve","reject","storage","remove","Config","logoutRedirect","OpenbelApiClient","getApiUrl","client","configureClient","self","withBaseUrl","withDefaults","credentials","rejectErrorResponses","withInterceptor","request","req","method","urlParams","slice","paramPair","reduce","pairArray","id_token","append","resp","status","rejection","responseError","openbelApiUrls","openbelApiClient","apiClient","updateClient","processFacets","facets","newFacets","facet","category","facetName","values","count","search","size","faceted","filters","max_values_per_facet","getstring","fetch","json","newData","nanopubs","nanopub_collection","_links","belStatement","expression_components","body","deleteBelNanopub","annotation_collection","query","annotation_type","numResults","query_string","annotation_value_collection","completion_collection","completions","processBelCompletions","d","completion","actions","len","front","back","delete","start_position","end_position","insert","position","move_cursor","classType","label","uploadDataset","file","FormData","getNanopubId","matches","match","getDatasets","dataset_collection","relationship_collection","bel_version","string","deleteDataset","dId","authEnabledAPI","enabled","PubmedClient","pubmedBaseUrl","PubmedService","resultList","result","enhancePubmed","journal","isoabbreviation","dateOfPublication","volume","issue","pageInfo","authorList","author","fullName","relationsList","About","builders","consultants","ApiList","presetAPIs","userAPIs","storedUserAPIs","e","storedSelectedAPIJSON","storedSelectedAPI","selectedAPI","selectedName","selectedURL","apiobj","aoName","aoURL","store","changedAPI","addUserAPI","userEnteredURL","userEnteredAPIName","removeUserAPI","Edit","activate","params","Help","Import","heading","uploadFn","tokenParam","datasets","upload","belFiles","ok","msg","deleteModal","document","getElementById","setAttribute","belFilesChanged","deleteConfiramtion","getModal","deleter","closeDeleter","Search","searching","selectedFacets","searchTerms","searchStart","searchSize","searchFaceted","facetSets","keys","search_metadata","collection_paging","start_page","current_page","end_page","total_pages","pagerPrevious","pagerNext","Number","current_page_size","searchResultsRange","saveSearchSize","toString","pageSearchResults","direction","deleteNanopub","nanopubUrl","modalFade","getElementByClassName","odalFade","getSpeciesIcon","organisms","find","x","Unknown","getExperimentContextItems","items","Welcome","ArrayifyValueConverter","toView","array","text","join","fromView","KeysValueConverter","sort","SemiToPipeValueConverter","SortValueConverter","console","log","StringifyValueConverter"],"mappings":"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","file":"app-bundle.js","sourcesContent":["import {LogManager} from 'aurelia-framework';\nimport {OpenbelapiService} from './resources/openbelapi-service';\nimport {User} from './components/User';\nimport {Router} from 'aurelia-router';\n\nlet logger = LogManager.getLogger('app');\n\nexport class App {\n\n  // static inject=[OpenbelapiService, User, Router];\n  // constructor(api, user, router) {\n  //   this.api = api;\n\n  static inject=[User, Router];\n  constructor(user, router) {\n    this.userData = user;\n    logger.debug('Router: ', router);\n\n    // router.addRoute({ route: 'test', moduleId: './test', name: 'access_token', nav:false, title: 'testing'});\n  }\n\n  configureRouter(config, router) {\n    logger.debug(\"Configuring router\");\n    config.title = 'BEL Manager';\n    config.map([\n      { route: ['', 'welcome'],   moduleId: './pages/welcome',         name: 'home',      nav: true,  title: 'Welcome' },\n      { route: 'search',          moduleId: './pages/search',          name: 'search',    nav: true,  title: 'Search' },\n      { route: 'edit/:id',        moduleId: './pages/edit',            name: 'edit',      activationStrategy: 'replace', nav: false, title: 'Edit BEL' },\n      { route: 'create',          moduleId: './pages/edit',            name: 'create',    activationStrategy: 'replace', nav: true,  title: 'Compose' },\n      { route: 'import',          moduleId: './pages/import',          name: 'import',    nav: true,  title: 'Datasets' },\n      { route: 'apilist',         moduleId: './pages/apilist',         name: 'apilist',   nav: false,  title: 'API Endpoints' },\n      // { route: 'about',           moduleId: './pages/about',           name: 'about',     nav: true,  title: 'About' },\n      // { route: 'help',            moduleId: './pages/help',            name: 'help',      nav: true,  title: 'Help' }\n    ]);\n\n    config.mapUnknownRoutes(instruction => {\n      // logger.debug('mapUnknownRoutes instruction: ', instruction);\n      // TODO would be good to figure out how to handle redirects for authentication flow\n      router.navigateToRoute('home');\n    });\n\n    this.router = router;\n  }\n\n  // activate(params, routeConfig, navigationInstruction) {\n  //   return Promise.all([\n  //                        this.api.authEnabled().then(enabled => {this.userData.authEnabled = enabled;}),\n  //                        this.api.getBelVersion().then(version => {this.userData.belVersion = version;})\n  //                      ]);\n  // }\n}\n","export default {\n  debug: true,\n  testing: true\n};\n","import {LogManager} from 'aurelia-framework';\nimport environment from './environment';\n\n//Configure Bluebird Promises.\nPromise.config({\n  longStackTraces: environment.debug,\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nLogManager.setLevel(LogManager.logLevel.debug);\nlet logger = LogManager.getLogger('webeditor-main');\n\nexport function configure(aurelia) {\n\n  logger.debug('Before Aureli.use')\n\n  aurelia.use\n    .standardConfiguration()\n    .plugin('aurelia-gravatar')\n    .plugin('aurelia-animator-css')\n    .plugin('aurelia-configuration');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n    logger.debug('Here in main.js')\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n  aurelia.start().then(a => a.setRoot());\n}\n\n\n","import {LogManager} from 'aurelia-framework';\n\nlet logger = LogManager.getLogger('User');\nlogger.debug('In User.js');\n/* Manage user and state information\n\n  authEnabled: determined by API endpoint (needs to be changed when one changes the API endpoint)\n\n  apiEndpoints:  determined by either BelMgr config or captured from localStorage/Userdata repository\n\n  selectedApiEndpoint: either localStorage/Userdata repo or first entry in apiEndpoints list\n\n  belVersion: determined by API endpoint\n\n\n  When we have an online user data repository, we'll add code here\n  to get and update the user data in this module.\n\n */\n\nexport class User {\n\n  authEnabled;\n  apiEndpoints;\n  selectedApiEndpoint;\n  belVersion;\n\n  constructor() {\n    this.test = 1;\n  }\n\n}\n","import {customElement, bindable, bindingMode, LogManager} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {OpenbelapiService} from '../resources/openbelapi-service';\nimport {PubmedService} from '../resources/pubmed-service';\n\nlet logger = LogManager.getLogger('bel-citation');\n\n@bindable({\n  name:'nanopub', //name of the property on the class\n  attribute:'nanopub', //name of the attribute in HTML e.g. x.bind=\"\"\n  changeHandler:'nanopubChanged', //name of the method to invoke when the property changes\n  defaultBindingMode: bindingMode.twoWay, //default binding mode used with the .bind command\n  defaultValue: undefined //default value of the property, if not bound or set in HTML\n})\n@customElement('bel-citation')\nexport class BelCitation {\n  citationId;\n  lastCitationId;\n\n  static inject = [OpenbelapiService, PubmedService, EventAggregator];\n  constructor(openbelapiService, pubmedService, eventAggregator) {\n    this.api = openbelapiService;\n    this.pubmedService = pubmedService;\n    this.ea = eventAggregator;\n  }\n\n  /**\n   * Force the nanopub object to be recreated for force an update of the nested\n   * object binding in the View\n   */\n  refreshNanopubObjBinding () {\n    let temp = this.nanopub;\n    this.nanopub = {};\n    this.nanopub = temp;\n  }\n\n  publish(payload) {\n    this.ea.publish('pubmed', payload);\n    logger.debug('Publish pubmed data');\n  }\n\n  attached() {\n    logger.debug('Nanopub: ', this.nanopub);\n    if (this.nanopub.citation) {\n      if (this.nanopub.citation.id) {\n        this.citationId = this.nanopub.citation.id;\n      }\n    }\n    else {\n      this.nanopub.citation = {};\n      this.nanopub.citation.type = 'PubMed';\n    }\n\n    if (this.citationId && this.nanopub.citation.type === 'PubMed') {\n      this.collectPubmed();\n    }\n  }\n\n  copyCitationId() {\n    this.lastCitationId = JSON.parse(JSON.stringify(this.citationId));\n    logger.debug('Copying CitationId to Last', this.lastCitationId);\n  }\n\n  nanopubChanged(value) {\n    logger.debug('CitationChanged: ', this.nanopub);\n  }\n\n  collectPubmed() {\n    this.nanopub.citation.id = this.citationId;\n\n    logger.debug('Id: ', this.citationId, 'Last', this.lastCitationId, ' Type: ', this.nanopub.citation.type);\n\n    // Collect Pubmed data from service\n    if (this.citationId && this.nanopub.citation.type === 'PubMed') {\n      logger.debug('Id2: ', this.citationId, 'Last2', this.lastCitationId, ' Type: ', this.nanopub.citation.type);\n      this.pubmedService.getPubmed(this.citationId)\n        .then(pubmed => {\n          this.pubmed = pubmed;\n          if (this.citationId === this.lastCitationId) {\n            this.citationPubmedChecks();\n          }\n          else {  // replace citation data if new CitationId\n            this.nanopub.citation.date = this.pubmed.journalInfo.printPublicationDate;\n            this.nanopub.citation.authors = this.pubmed.bel.authors;\n            this.nanopub.citation.name = this.pubmed.bel.refString;\n          }\n          this.copyCitationId();  // Track if the CitationId has changed\n          this.refreshNanopubObjBinding();\n          this.publish(pubmed);\n        })\n        .catch(reason => {\n          this.pubmed = {};\n          logger.error('Collect pubmed data', reason);\n        });\n    }\n    else {\n      this.pubmed = {};\n      this.$parent.pubmed = {};\n    }\n\n  }\n\n\n  /**\n   * Check for citation information mismatch or missing information for Pubmed entries\n   *\n   * Add Pubmed data to nanopub.citation if nanopub.citation information is missing\n   */\n  citationPubmedChecks() {\n    if (this.nanopub.citation.type === 'PubMed') {\n      // Check date\n      if (!this.nanopub.citation.date) {\n        this.nanopub.citation.date = this.pubmed.journalInfo.printPublicationDate;\n      }\n      else if (this.nanopub.citation.date !== this.pubmed.journalInfo.printPublicationDate) {\n        this.pubmed.bel.mismatch.date = true;\n      }\n      // Check authors\n      if (!this.nanopub.citation.authors) {\n        this.nanopub.citation.authors = this.pubmed.bel.authors;\n      }\n      else if (this.nanopub.citation.authors !== this.pubmed.bel.authors) {\n        this.pubmed.bel.mismatch.authors = true;\n      }\n      // Check refString\n      if (!this.nanopub.citation.name) {\n        this.nanopub.citation.name = this.pubmed.bel.refString;\n      }\n      else if (this.nanopub.citation.name !== this.pubmed.bel.refString) {\n        this.pubmed.bel.mismatch.refString = true;\n      }\n    }\n  }\n\n  // Todo: convert replace* methods with getter/setters after making sure they will update the View correctly\n\n  /**\n   * Replace nanopub citation date with newval\n   * @param newval\n   */\n  replaceCitationDate(newval) {\n    this.nanopub.citation.date = newval;\n    this.pubmed.bel.mismatch.date = false;\n    this.refreshNanopubObjBinding();\n  }\n\n  /**\n   * Replace nanopub citation date with newval\n   * @param newval\n   */\n  replaceCitationName(newval) {\n    this.nanopub.citation.name = newval;\n    this.pubmed.bel.mismatch.refString = false;\n    this.refreshNanopubObjBinding();\n  }\n\n  /**\n   * Replace nanopub citation date with newval\n   * @param newval\n   */\n  replaceCitationAuthors(newval) {\n    this.nanopub.citation.authors = newval;\n    this.pubmed.bel.mismatch.authors = false;\n    this.refreshNanopubObjBinding();\n  }\n\n}\n","import {bindable, LogManager, customElement} from 'aurelia-framework';\nimport {CompositionTransaction} from 'aurelia-framework';\nimport {OpenbelapiService} from '../resources/openbelapi-service';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\nlet logger = LogManager.getLogger('contextitem');\n\n@customElement('bel-context-item')\nexport class BelContextItem {\n  @bindable type;\n  @bindable annotation;\n  @bindable index;\n  @bindable last;\n  @bindable debounceTime = 100;\n  @bindable hasTypeFocus = false;\n  @bindable hasAnnotationFocus = false;\n  @bindable showResults = false;\n\n  types;\n\n  static inject = [OpenbelapiService, CompositionTransaction, EventAggregator];\n  constructor(openbelapiService, compositionTransaction, eventAggregator){\n    this.api = openbelapiService;\n    this.compositionTransaction = compositionTransaction;\n    this.ea = eventAggregator;\n    this.compositionTransactionNotifier = null;\n  }\n\n  created() {\n    this.compositionTransactionNotifier = this.compositionTransaction.enlist();\n\n    this.api.getBelAnnotationTypes()\n      .then(types => {\n        this.types = types;\n        logger.debug('AnnotationTypes: ', this.types);\n        this.compositionTransactionNotifier.done();\n      })\n      .catch(function(reason) {\n        logger.error('GET AnnotationTypes Error: ', reason);\n      });\n  }\n\n  attached() {\n    logger.debug('Index: ', this.index);\n    logger.debug('Last: ', this.last);\n    logger.debug('Type ', this.type);\n    logger.debug('Anno ', this.annotation);\n    logger.debug('Types: ', this.types);\n  }\n\n  notifyAddBlank() {\n    this.ea.publish('addContextItemBlank');\n  }\n\n  /*\n   *  Annotation Types\n   */\n  hasTypeFocusChanged(newValue){\n    this.filterTypes();\n    logger.debug('Type focus changed: ', newValue);\n    logger.debug('Types: ', this.types);\n    this.showTypes = newValue;\n  }\n\n  typeChanged(){\n    if (this.type && this.types) {\n      this.filterTypes();\n    }\n  }\n\n  filterTypes(){\n    if (this.types) {\n      this.filteredTypes = this.types.filter(item => {\n        return item.annotation.name.toLowerCase().indexOf(this.type.toLowerCase()) > -1;\n      });\n      logger.debug('FT: ', this.filteredTypes);\n    }\n  }\n\n  selectType(type){\n    this.type = type.annotation.name;\n    this.showTypes = false;\n  }\n\n  typeClear(){\n    this.selectedType = null;\n    this.searchType = '';\n    this.showTypes = false;\n  }\n\n  /*\n   *  Annotation Values\n   */\n  hasAnnotationFocusChanged(newValue){\n    this.filterAnnotations();\n    logger.debug('Annotation focus changed: ', newValue);\n    this.showAnnotations = newValue;\n  }\n\n  annotationChanged(){\n    logger.debug('Annotation changing');\n    if (this.hasAnnotationFocus && this.annotation && this.annotation.length > 1) {\n      this.filterAnnotations();\n    }\n  }\n\n  filterAnnotations(){\n    if (this.annotation.length > 1) {\n      this.api.getBELAnnotationValues(this.annotation, this.type)\n        .then(data => {\n          this.filteredAnnotations = data;\n          this.compositionTransactionNotifier.done();\n        })\n        .catch(function(reason) {\n          logger.error('Filter annotations error: ', reason);\n      });\n    }\n  }\n\n  selectAnnotation(annotation){\n    this.annotation = annotation.annotation_value.name;\n    this.type = annotation.annotation_value.annotation.name;\n    this.showAnnotations = false;\n  }\n\n  annotationClear(){\n    this.showAnnotations = false;\n  }\n}\n","import {customElement, bindable, LogManager} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\nlet logger = LogManager.getLogger('context');\n\n// custom element named:  bel-context\nexport class BelContext {\n  @bindable nanopub;\n\n  static inject = [EventAggregator];\n  constructor(eventAggregator) {\n    this.ea = eventAggregator;\n  }\n\n  attached() {\n    // Add blank entry to end of experiment context to insert new form fields\n    this.addBlank();\n\n    this.subscription = this.ea.subscribe('addContextItemBlank', () => {\n      this.addBlank();\n      logger.debug('Checking to add Blank', this.nanopub.experiment_context);\n    });\n  }\n\n  detached() {\n    this.subscription.dispose();\n  }\n\n  nanopubChanged(value) {\n    logger.debug('Experiment Context changes: ', this.nanopub.experiment_context);\n    this.experiment_context = this.nanopub.experiment_context;\n  }\n\n  /**\n   * Add blank experiment content to end of experiment context\n   */\n  addBlank() {\n    if (this.nanopub.experiment_context && this.nanopub.experiment_context.length > 0) {\n      let last_item_idx = this.nanopub.experiment_context.length - 1;\n      if (this.nanopub.experiment_context[last_item_idx].value) {\n        this.nanopub.experiment_context.push({'name': '', 'value': ''});\n      }\n    }\n    else {\n      this.nanopub.experiment_context = [];\n      this.nanopub.experiment_context.push({'name': '', 'value': ''});\n    }\n  }\n\n  /**\n   * Allow deletion of Nanopub Experiment Context\n   *\n   * @param idx\n   */\n  removeItem(idx) {\n    this.nanopub.experiment_context.splice(idx, 1);\n  }\n\n}\n\n","import {inject, customElement, bindable, bindingMode, LogManager} from 'aurelia-framework';\n\nlet logger = LogManager.getLogger('metadata');\n\n@bindable({\n  name:'nanopub', //name of the property on the class\n  attribute:'nanopub', //name of the attribute in HTML e.g. x.bind=\"\"\n  changeHandler:'nanopubChanged', //name of the method to invoke when the property changes\n  defaultBindingMode: bindingMode.twoWay, //default binding mode used with the .bind command\n  defaultValue: undefined //default value of the property, if not bound or set in HTML\n})\n@customElement('bel-metadata')\nexport class BelMetadata {\n  @bindable metadata;\n\n  nanopubChanged(value) {\n    logger.debug('Metadata Changed: ', this.nanopub);\n  }\n}\n\n","import {inject, bindable, LogManager} from 'aurelia-framework';\nimport {activationStrategy, Router} from 'aurelia-router';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport * as toastr from \"toastr\";\n\nimport {OpenbelapiService} from '../resources/openbelapi-service';\n\nlet logger = LogManager.getLogger('bel-nanopub');\n\n@bindable({name:\"nanopubId\", attribute:\"nanopub-id\"})\n@inject(OpenbelapiService, Router, EventAggregator)\nexport class BelNanopub {\n\n    nanopub;\n    metadata = {\n      'nanopub_notes': '', 'nanopub_status': '', 'author': '',\n      'creation_date': '', 'reviewer': '', 'review_date': '',\n      'nanopub_source': ''};\n    submitNanopub = {};  // add back the top-level 'nanopub' key, value prior to submission\n    annotations = [];\n\n  // Needed to allow New BEL menu item to refresh the form\n  determineActivationStrategy() {\n    return activationStrategy.replace;\n  }\n\n  constructor(openbelapiService, router, eventAggregator) {\n    this.api = openbelapiService;\n    this.router = router;\n    this.ea = eventAggregator;\n  }\n\n  bind() {\n    this.loadFormData();\n  }\n\n  attached() {\n    this.subscription = this.ea.subscribe('pubmed', payload => {\n      // logger.debug('Received payload: ', payload);\n      this.pubmed = payload;\n      this.showPubmed = true;\n    });\n  }\n\n  detached() {\n    this.subscription.dispose();\n  }\n\n\n  loadFormData() {\n    logger.debug('In load form data');\n    if (this.nanopubId) {\n      logger.debug('Inside loadFormData -- NanopubID: ', this.nanopubId);\n      // Return Promise in activate to wait until all data is collected before building\n      //   the page\n      return this.api.getBelNanopub(this.nanopubId)\n        .then(nanopub => {\n          this.nanopub = nanopub;\n          logger.debug('Nanopub: ', this.nanopub);\n          this.extractFormMetadata(); // depends on this.metadata and this.nanopub\n          return this.api.getBelComponents(this.nanopub.bel_statement);\n        })\n        .then(comp => {\n          this.belSubject = comp.subject;\n          this.belObject = comp.object;\n          this.belRelationship = comp.relationship;\n          logger.debug('Subj: ', this.belSubject);\n\n        })\n        .catch(reason => {\n          logger.error('Process BEL Nanopub Error: ', reason);\n        });\n    }\n    else {\n      this.nanopub = new Nanopub();\n      // this.nanopub = {};\n      return this.api.getBelAnnotationTypes()\n            .then(types => {\n              this.types = types;\n              logger.debug('AnnotationTypes: ', this.types);\n            })\n            .catch(function(reason) {\n              logger.error(`GET Annotation Types: ${reason}`);\n            });\n    }\n  }\n\n  /**\n   * Force the nanopub object to be recreated for force an update of the nested\n   * object binding in the View\n   */\n  refreshNanopubObjBinding () {\n    let temp = this.nanopub;\n    this.nanopub = {};\n    this.nanopub = temp;\n  }\n\n  prepareNanopub() {\n    let submitNanopub = {};\n    // Prepare BEL Statement\n    this.nanopub.bel_statement = `${this.belSubject} ${this.belRelationship} ${this.belObject}`;\n\n    // Remove blank entries in nanopub.experiment_context\n    logger.debug('Cleaning nanopub -- context items');\n    this.nanopub.experiment_context = this.nanopub.experiment_context.filter(obj => obj.value);\n\n    // Add to Metadata\n    this.addFormMetadata();\n\n    submitNanopub = {'nanopub': this.nanopub};\n    return submitNanopub;\n  }\n\n  // Add to nanopub Metadata\n  //   Note - this is only for adding strings\n  //   TODO - support adding objects as values\n  addFormMetadata() {\n    if (this.nanopub.metadata) {\n      for (let key in this.metadata) {\n        let idx = this.nanopub.metadata.findIndex(obj => obj.name === key);\n        if (idx >= 0) {\n          this.nanopub.metadata[idx].value += this.metadata.key;\n        } else {\n          this.nanopub.metadata.push(\n            {\n              'name' : key,\n              'value': this.metadata[key]\n            });\n        }\n      }\n    }\n  }\n\n  extractFormMetadata() {\n    for (let k in this.metadata) {\n      let idx = this.nanopub.metadata.findIndex(obj => obj.name === k);\n      if (idx >= 0) {\n        this.metadata[k] = this.nanopub.metadata[idx].value;\n      }\n    }\n  }\n\n  submitUpdate() {\n    logger.debug('Prior to prepare update nanopub', JSON.stringify(this.nanopub, null, 2));\n    let submitNanopub = this.prepareNanopub();\n    logger.debug('Update nanopub', JSON.stringify(submitNanopub, null, 2));\n    this.api.loadBelNanopub(submitNanopub, this.nanopubId)\n    .then(response => {\n      toastr.success('', 'Updated Nanopub');\n    })\n    .catch(function(reason) {\n      toastr.options = {\"timeOut\": \"15000\"};\n      toastr.error('', 'Cannot update Nanopub');\n      toastr.options = {\"timeOut\": \"5000\"};\n      logger.error('Problem updating Nanopub ', reason);\n    });\n\n    return true;\n  }\n\n  submitNew() {\n    logger.debug('Prior to prepare new nanopub', JSON.stringify(this.nanopub, null, 2));\n    let submitNanopub = this.prepareNanopub();\n    logger.debug('Submit new nanopub', JSON.stringify(submitNanopub, null, 2));\n\n    this.api.loadBelNanopub(submitNanopub)\n    .then(response => {\n      return response.headers.get('Location');\n    })\n    .then(location => {\n      logger.debug('Loc: ', location);\n      let nanopubId = this.api.getIdFromUrl(location);\n      logger.debug('Router: ', this.router);\n      toastr.success('', 'Created New Nanopub');\n      this.router.navigateToRoute('edit', { id: nanopubId });\n    })\n    .catch(function(reason) {\n      toastr.options = {\"timeOut\": \"15000\"};\n      toastr.error('', 'Cannot create new Nanopub');\n      toastr.options = {\"timeOut\": \"5000\"};\n      logger.error('Problem creating Nanopub ', reason);\n    });\n\n    return true;\n  }\n\n}\n\n// this.nanopub = new Nanopub(data);   // data = nanopub from ApI call\nclass Nanopub {\n  citation;\n  constructor(data) { // { citation: 'blue', red: 'gray' }\n    Object.assign(this, data);\n  }\n}\n","import {customElement, bindable, bindingMode, LogManager} from 'aurelia-framework';\nimport {CompositionTransaction} from 'aurelia-framework';\nimport {OpenbelapiService} from '../resources/openbelapi-service';\n\nlet logger = LogManager.getLogger('statement');\n\n@bindable({\n  name:'nanopub', //name of the property on the class\n  attribute:'nanopub', //name of the attribute in HTML e.g. x.bind=\"\"\n  changeHandler:'nanopubChanged', //name of the method to invoke when the property changes\n  defaultBindingMode: bindingMode.twoWay, //default binding mode used with the .bind command\n  defaultValue: undefined //default value of the property, if not bound or set in HTML\n})\n@bindable({name:\"belSubject\", attribute:\"bel-subject\", defaultBindingMode: bindingMode.twoWay})\n@bindable({name:\"belRelationship\", attribute:\"bel-relationship\", defaultBindingMode: bindingMode.twoWay})\n@bindable({name:\"belObject\", attribute:\"bel-object\", defaultBindingMode: bindingMode.twoWay})\n@customElement('bel-statement')\nexport class BelStatement {\n\n  @bindable nanopub;\n  relationships = [];\n\n  static inject=[OpenbelapiService, CompositionTransaction];\n  constructor(openbelapiService, compositionTransaction) {\n    this.api = openbelapiService;\n    this.compositionTransaction = compositionTransaction;\n  }\n\n  created() {\n    this.compositionTransactionNotifier = this.compositionTransaction.enlist();\n    this.api.getRelationships()\n      .then(relationships => {\n        this.relationships = relationships;\n        logger.debug('Relationships: ', this.relationships);\n        this.compositionTransactionNotifier.done();\n      })\n      .catch(function(reason) {\n        logger.error('GET Relationships Error: ', reason);\n      });\n  }\n\n  // Pulling parent's context into scope\n  bind(context) {\n    this.$parent = context;\n  }\n\n  belSubjectChanged(value) {\n    logger.debug('BELsubject changed: ', this.belsubject);\n  }\n\n  nanopubChanged(value) {\n    logger.debug('StatementChanged: ', this.nanopub);\n  }\n\n}\n","import {inject, bindable, bindingMode, LogManager, customElement} from 'aurelia-framework';\nimport {OpenbelapiService} from '../resources/openbelapi-service';\n\nlet logger = LogManager.getLogger('bel-completion');\n\n@inject(OpenbelapiService)\n@customElement('bel-term')\nexport class BelTerm {\n  @bindable bel;\n  @bindable debounceTime = 400;  // TODO using a constant in the View template - change to use this value\n  @bindable hasTermFocus = false;\n  @bindable hasAnnotationFocus = false;\n  @bindable showResults = false;\n  cursor;\n  loading = false;\n  focused = false;\n\n  constructor(OpenbelapiService) {\n    this.api = OpenbelapiService;\n  }\n\n  hasFocus() {\n    this.focused = true;\n  }\n\n  belChanged() {\n    logger.debug('BEL Term changing ', this.bel);\n\n    // Do not process change if change is due to selectTerm()\n    if (this.selectedTerm) {\n      this.selectedTerm = false;\n      return;\n    }\n\n    if (this.focused && this.bel && this.bel.length > 0) {\n      this.cursor = this.belinput.selectionEnd;\n      this.loading = true;\n      this.api.getBelCompletions(this.bel, this.cursor)\n      .then(results => {\n        // logger.debug(\"Completions: \", results);\n        this.filteredTerms = results;\n        this.showTerms = true;\n        this.loading = false;\n      })\n      .catch(reason => {\n        logger.error('Filter BEL Completions error ', reason);\n      });\n    }\n  }\n\n  blurred() {\n    // logger.debug(\"Blurred \");\n    this.showTerms = false;\n    this.loading = false;\n    this.focused = false;\n  }\n\n  // Update the BEL Term input field and set the cursor\n  selectTerm(item) {\n    logger.debug('Item: ', item);\n\n    this.bel = item.term;\n    this.cursor = this.bel.length;\n    logger.debug('BEL: ', this.bel, ' Cursor: ', this.cursor);\n\n    this.showTerms = false;\n    this.selectedTerm = true;\n    this.belinput.setSelectionRange(this.cursor, this.cursor);\n    this.belinput.focus();\n  }\n\n}\n","import {LogManager} from 'aurelia-framework';\nlet logger = LogManager.getLogger('footer');\nlogger.debug('In footer.js');\n\nexport class Footer {\n\n}\n","import {bindable, LogManager} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {Authentication} from '../resources/authentication';\nimport {User} from './User';\nimport {OpenbelapiService} from '../resources/openbelapi-service';\n\nlet logger = LogManager.getLogger('nav-bar');\n\nlogger.debug('In nav-bar.js');\n\nexport class NavBar {\n  @bindable router;\n  authEnabled;\n  selectedOpenbelApiUrl;\n  endpointName;\n  belVersion;\n  navStick;\n  window;\n\n  static inject() { return [OpenbelapiService, User, Authentication, EventAggregator]; }\n  constructor(api, user, auth, ea) {\n\n    this.api = api;\n    this.userData = user;\n    this.auth = auth;\n    this.ea = ea;\n\n    this.authEnabled = this.userData.authEnabled;\n\n    logger.debug('NavBar AuthEnabled: ', this.authEnabled);\n\n    if (this.authEnabled && this.auth.checkToken()) {\n      this.action = 'Logout';\n    }\n    else {\n      this.action = 'Login';\n    }\n    this.getSelectedOpenbelApiUrl();\n    this.api.getBelVersion().then(version => {\n        this.belVersion = version;\n    });\n  }\n\n  /* called when the view is attached to the dom */\n  attached() {\n    var selectedCB = obj => {\n      this.endpointName = obj.name;\n    };\n    this.subscription1 = this.ea.subscribe('selectedOpenbelApiUrl', selectedCB);\n    var updatedClientCB = obj => {\n      this.api.getBelVersion().then(version => {\n        this.belVersion = version;\n      });\n    };\n    this.subscription2 = this.ea.subscribe('updatedAPIClient', updatedClientCB);\n  }\n\n  detached() {\n    this.subscription1.dispose();\n    this.subscription2.dispose();\n  }\n\n  navbarAction() {\n    if (this.action === 'Logout') {\n      this.auth.removeToken();\n      logger.info('Logged out.');\n      window.location.href = window.location.origin;\n    } else if (this.action === 'Login') {\n      this.auth.authenticate(window.location.protocol, window.location.host, window.location.pathname, window.location.hash);\n    }\n  }\n\n  getSelectedOpenbelApiUrl() {\n    this.selectedOpenbelApiUrl = JSON.parse(localStorage.getItem('selectedAPI'));\n    this.endpointName = this.selectedOpenbelApiUrl.name;\n  }\n\n\n}\n","import {inject} from 'aurelia-framework';\nimport {LogManager} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\nimport {PubmedService} from '../resources/pubmed-service';\n\n// Subscribed to the 'pubmed' EventAggregator channel for the pubmed content\n//   needed for this component\n\nlet logger = LogManager.getLogger('pubmed-customelement');\nlogger.debug('In pubmed.js');\n\n@inject(EventAggregator, PubmedService)\nexport class Pubmed {\n  pubmed;\n\n  constructor(eventAggregator, pubmedService) {\n    this.ea = eventAggregator;\n    this.pubmedService = pubmedService;\n  }\n\n  attached() {\n      this.subscription = this.ea.subscribe('pubmed', payload => {\n      // logger.debug('Received Payload: ', payload);\n      this.pubmed = payload;\n      if (!this.pubmed.title) {\n        this.pubmed = this.pubmedService.getPubMed(this.pubmed.id);\n      }\n    });\n  }\n\n  detached() {\n    this.subscription.dispose();\n  }\n\n}\n","import {bindable} from 'aurelia-framework';\nimport {OpenbelapiService} from '../resources/openbelapi-service';\nimport {Authentication} from '../resources/authentication';\nimport {User} from './User';\n\nimport {LogManager} from 'aurelia-framework';\n\nlet logger = LogManager.getLogger('search-export');\n\nexport class SearchExport {\n  @bindable searchUrl;\n\n  exportUrl;\n  authEnabled;\n  dataType =  {\n    id: 'bel',\n    name: 'BEL Script',\n    media_type: 'application / bel',\n    extension: 'bel'\n  };\n\n  dataTypes = [{\n    id: 'bel',\n    name: 'BEL Script',\n    media_type: 'application / bel',\n    extension: 'bel'\n  }, {\n    id: 'xbel',\n    name: 'XBEL',\n    media_type: 'application / xml',\n    extension: 'xbel'\n  },\n  {\n    id: 'json_nanopub',\n    name: 'JSON Nanopub',\n    media_type: 'application / json',\n    extension: 'json'\n  }, {\n    id: 'nquads',\n    name: 'N-quads RDF',\n    media_type: 'application / n - quads',\n    extension: 'nq'\n  },\n\n  // Hiding this until it is available again\n  // {\n  //   id: 'json_nanopub',\n  //   name: 'JSON Nanopub',\n  //   media_type: 'application / json',\n  //   extension: 'json'\n  // }, {\n\n  {\n    id: 'turtle',\n    name: 'Turtle RDF',\n    media_type: 'application / turtle OR application / x - turtle',\n    extension: 'ttl'\n  }];\n\n  static inject() { return [OpenbelapiService, Authentication, User]; }\n  constructor(openbelapiService, authentication, user) {\n    this.openbelapiService = openbelapiService;\n    this.auth = authentication;\n    this.userData = user;\n    this.authEnabled = this.userData.authEnabled;\n    logger.debug(\"AuthEnabled: \", this.authEnabled);\n  }\n\n  updateExportUrl() {\n    this.exportUrl = this.updateQueryString(this.exportUrl, 'format', this.dataType.id);\n\n    if (this.authEnabled) {\n      this.exportUrl = this.updateQueryString(this.exportUrl, 'token', this.auth.getToken());\n    }\n  }\n\n  searchUrlChanged(newvalue) {\n    logger.debug('1 searchUrl: ', this.searchUrl);\n    if (!!this.searchUrl) {\n      this.exportUrl = JSON.parse(JSON.stringify(this.searchUrl));\n      this.updateExportUrl();\n      logger.debug('1 ExportUrl: ', this.exportUrl);\n    }\n    logger.debug('Missing searchUrl')\n\n  }\n\n  setDataType(type) {\n    this.dataType = type;\n\n    this.updateExportUrl();\n\n    logger.debug('2 ExportUrl: ', this.exportUrl);\n  }\n\n  // Not supplying a value will remove the parameter, supplying one will\n  //   add/update the parameter. Sourced from: http://stackoverflow.com/questions/5999118/add-or-update-query-string-parameter\n  updateQueryString(url, key, value) {\n\n    url = url.replace(/&$/, '');\n    let re = new RegExp(\"([?&])\" + key + \"=.*?(&|#|$)(.*)\", \"gi\"),\n        hash;\n\n    if (re.test(url)) {\n        if (typeof value !== 'undefined' && value !== null)\n            return url.replace(re, '$1' + key + \"=\" + value + '$2$3');\n        else {\n            hash = url.split('#');\n            url = hash[0].replace(re, '$1$3').replace(/(&|\\?)$/, '');\n            if (typeof hash[1] !== 'undefined' && hash[1] !== null)\n                url += '#' + hash[1];\n            return url;\n        }\n    }\n    else {\n        if (typeof value !== 'undefined' && value !== null) {\n            var separator = url.indexOf('?') !== -1 ? '&' : '?';\n            hash = url.split('#');\n            url = hash[0] + separator + key + '=' + value;\n            if (typeof hash[1] !== 'undefined' && hash[1] !== null)\n                url += '#' + hash[1];\n            return url;\n        }\n        else\n            return url;\n    }\n  }\n}\n","import {LogManager} from 'aurelia-framework';\nimport {Configure} from 'aurelia-configuration';\n\nlet logger = LogManager.getLogger('Authentication');\nlogger.debug('In authentication.js');\n\n// let loginUrl = Config.loginUrl;\n\nexport class Authentication {\n\n  loginUrl;\n\n  static inject() { return [Configure]; }\n  constructor (config) {\n    logger.debug('In Authentication class');\n    this.config = config;\n    this.loginUrl = this.config.get('loginUrl');\n    logger.debug('LoginUrl: ', this.loginUrl);\n  }\n\n  /*\n    this.auth.authenticate(window.location.href, window.location.hash)\n   */\n  authenticate(protocol, host, pathname, hash) {\n    let cleanHash = hash.replace('#/', '');\n    if (!cleanHash) {cleanHash = 'home';}\n    logger.debug('Protocol: ', protocol, ' Host: ', host, ' Pathname: ', pathname, ' State: ', cleanHash);\n    window.location.href = `${this.loginUrl}&redirect_uri=${protocol}//${host}${pathname}?state=${cleanHash}`;\n  }\n\n  setToken(token) {\n    localStorage.setItem('BELMgrToken', token);\n  }\n\n  getToken() {\n    return localStorage.getItem('BELMgrToken');\n  }\n\n  removeToken() {\n    localStorage.removeItem('BELMgrToken');\n  }\n\n  checkToken() {\n    let token = this.getToken();\n    if (!token) {\n      return false;\n    }\n    return true;\n  }\n\n  getPayload() {\n    let token = this.getToken();\n\n    if (token && token.split('.').length === 3) {\n      let base64Url = token.split('.')[1];\n      let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n      return JSON.parse(decodeURIComponent(escape(window.atob(base64))));\n    }\n    else {return false;}\n  }\n\n  // Will return true if token exists even though it is checking format and expiration\n  isAuthenticated() {\n    let token = this.getToken();\n\n    if (token) {return true;}\n\n    return false;\n\n    // if (token) {\n    //   if (token.split('.').length === 3) {\n    //     let base64Url = token.split('.')[1];\n    //     let base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');\n    //     let exp = JSON.parse(window.atob(base64)).exp;\n    //     if (exp) {\n    //       return Math.round(new Date().getTime() / 1000) <= exp;\n    //     }\n    //     return true;\n    //   }\n    //   return true;\n    // }\n    // return false;\n  }\n\n  isString(value) {\n    return typeof value === 'string';\n  }\n\n  logout(redirect) {\n    let tokenName = this.tokenName;\n    return new Promise((resolve, reject)=>{\n      this.storage.remove(tokenName);\n\n      if (this.Config.logoutRedirect && !redirect) {\n        window.location.href = this.Config.logoutRedirect;\n      }\n      else if (this.isString(redirect)) {\n        // window.location.href =redirect;\n        // this.router.navigate(redirect);\n        window.location.href = redirect;\n      }\n\n      resolve();\n    });\n  }\n}\n","import {LogManager} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport {Router} from 'aurelia-router';\n\nimport {AureliaConfiguration} from 'aurelia-configuration';\n\nimport {Authentication} from './authentication';\n\n\nlet logger = LogManager.getLogger('openbelapi-client');\n\nexport class OpenbelApiClient {\n\n  client;\n  openbelApiUrl;\n\n  static inject() { return [Authentication, Router, AureliaConfiguration]; }\n  constructor(auth, router, config) {\n    this.auth = auth;\n    this.router = router;\n\n    this.config = config;\n    this.selectedOpenbelApiUrl = this.getApiUrl();\n    this.client = this.configureClient(this.selectedOpenbelApiUrl);\n  }\n\n  configureClient(selectedOpenbelApiUrl){\n    let self = this;\n    let client = new HttpClient().configure(config => {\n      config\n        .withBaseUrl(selectedOpenbelApiUrl.api)\n        .withDefaults({\n          credentials: 'same-origin',\n          headers: {\n            'Accept': 'application/hal+json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n        .rejectErrorResponses()\n        .withInterceptor({\n          request(req) {\n            logger.debug(`Requesting ${req.method} ${req.url}`);\n\n            // If id_token exists as a query param - save it\n            // TODO - rework this to check for id_token first\n            // TODO - update the location directly instead of redirecting in Aurelia\n            let urlParams = location.href.split(/[?&#]/).slice(1).map(function(paramPair) {\n              return paramPair.split(/=(.+)?/).slice(0, 2);\n              }).reduce(function (obj, pairArray) {\n                obj[pairArray[0]] = pairArray[1];\n                return obj;\n              }, {});\n\n            if (urlParams.id_token) {\n              self.auth.setToken(urlParams.id_token);\n\n              // logger.debug('Navigate to: ', urlParams.state);\n              // //TODO test if we still need the setTimeout wrapper\n              // // setTimeout(() => {\n              //   let link = self.router.navigateToRoute(urlParams.state, {}, {replace: true});\n              //   logger.debug('Link: ', link);\n              // // }, 200);\n            }\n\n            let token = self.auth.getToken();\n            req.headers.append('Authorization', 'Bearer ' + token);\n\n            return req; // you can return a modified Request, or you can short-circuit the request by returning a Response\n          },\n          response(resp) {\n            logger.debug(`Received ${resp.status} ${resp.url}`);\n            if (resp.status === 401) {\n              let rejection = Promise.reject(resp);\n              return rejection;\n            }\n            return resp; // you can return a modified Response\n          },\n          responseError(resp) {\n            if (resp.status === 401) {\n              logger.info('Backend returned HTTP 401, redirecting to loginUrl.');\n              // window.location.href = window.location.origin;\n              self.auth.authenticate(window.location.protocol, window.location.host, window.location.pathname, window.location.hash);\n            }\n            logger.debug(`Received ${resp.status} ${resp.url}`);\n            let rejection = Promise.reject(resp);\n            return rejection;\n          }\n        });\n    });\n\n    return client;\n  }\n\n  getApiUrl() {\n    let openbelApiUrls = this.config.get('openbelApiUrls');\n    let selectedOpenbelApiUrl = JSON.parse(localStorage.getItem('selectedAPI'));\n    if (! selectedOpenbelApiUrl) {\n      localStorage.setItem('selectedAPI', JSON.stringify(openbelApiUrls[0]));\n      return openbelApiUrls[0];\n    }\n    return selectedOpenbelApiUrl;\n  }\n}\n\n","import {LogManager} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\nimport {OpenbelApiClient} from './openbelapi-client';\nimport {Authentication} from './authentication';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\nlet logger = LogManager.getLogger('openbelApi');\n\nexport class OpenbelapiService {\n\n  static inject() { return [OpenbelApiClient, Authentication, EventAggregator]; }\n  constructor(openbelApiClient, authentication, ea) {\n    this.openbelApiClient = openbelApiClient;\n    this.apiClient = this.openbelApiClient.client;\n    this.auth = authentication;\n    this.ea = ea;\n    this.ea.subscribe('selectedOpenbelApiUrl', obj => {\n        this.updateClient(obj)\n        this.ea.publish('updatedAPIClient');\n    });\n  }\n\n  /**\n   *  Update client with new Openbel API Url\n   */\n  updateClient(selectedOpenbelApiUrl) {\n    this.apiClient = this.openbelApiClient.configureClient(selectedOpenbelApiUrl);\n  }\n\n  /**\n   * <p>Process facets from search</p>\n   * <p>This removes the facets that won't be used in the search results page\n   *    and reorganizes it for presentation in the search results page.\n   * </p>\n   *\n   * @param {Object} facets - facets returned by BEL API from search\n   * @returns {Object} facets - facets after processing to be used in web page\n   * */\n  processFacets(facets) {\n    let newFacets = {};\n\n    for (let facet of facets) {\n      if (\n        facet.category === 'experiment_context' ||\n        facet.name === 'Status' ||\n        facet.category === 'citation' ||\n        facet.name === 'dataset' ||\n        facet.name === 'nanopub_status'\n      ) {\n        let facetName = facet.name;\n\n        if (facet.category === 'citation') {\n          facetName = 'Reference ID';\n        }\n        if (facet.name === 'dataset') {\n          facetName = 'Datasets';\n        }\n        if (facet.name === 'nanopub_status') {\n          facetName = 'Nanopub Status';\n        }\n\n        newFacets[facetName] = [];\n        for (let value of facet.values) {\n          let name = value.value;\n          newFacets[facetName].push({\n            'name': name,\n            'count': value.count,\n            'filter': value.filter\n          });\n        }\n      }\n    }\n\n    return newFacets;\n  }\n\n  /**\n   * Search the BELMgr database and return website ready results\n   *\n   * @param {String} filter - search string\n   * @param {Integer} start - result page starting point (default = 0)\n   * @param {Integer} size - number of results returned (default = 10)\n   * @param {Integer} faceted - facet results if equals 1 (default = 1)\n   * @return {Promise} data - processed search results ready to display on the search results web page\n   * */\n  search(start = 0, size = 10, faceted = 'yes', filters) {\n    /* eslint-disable camelcase */\n    let max_values_per_facet = 10;\n    let getstring = `/nanopubs?start=${start}&size=${size}&faceted=${faceted}&max_values_per_facet=${max_values_per_facet}`;\n    /* eslint-enable camelcase */\n\n\n    if (filters) {\n      for (let filter of filters) {\n        getstring += `&filter=${filter}`;\n      }\n    }\n\n    // logger.debug('Filters2: ', filters);\n    logger.debug('Getstring1: ', getstring);\n\n    return this.apiClient.fetch(getstring)\n      .then(response => response.json())\n      .then(data => {\n        logger.debug('Data: ', data);\n        let newData = {};\n        newData.nanopubs = data.nanopub_collection;\n        newData.facets = this.processFacets(data.facets);\n        newData.metadata = data.metadata;\n        newData.searchUrl = data._links.self.href;\n        return newData;\n      })\n      .catch(function(reason) {\n        if (reason.status === 404) {\n          return {\n            'nanopubs': null,\n            'facets': {}\n          };\n        }\n        if (reason.status === 401) {\n          logger.info('Unauthorized request');\n        }\n        logger.error('Search API Error: ', reason);\n      });\n  }\n\n  /**\n   * Get BEL components (subject, relation, object) from a BEL statement\n   * @param belStatement\n   * @returns {\"subject\": \"\", \"relationship\": \"\", \"object\": \"\"}\n   */\n  getBelComponents(belStatement) {\n    if (belStatement) {\n      return this.apiClient.fetch(`/expressions/${belStatement}/components?flatten=1`)\n        .then(response => response.json())\n        .then(data => {\n          // logger.debug('BEL Nanopub: ', data);\n          return data.expression_components;\n        })\n        .catch(function(reason) {\n          logger.error(`GET BEL Components Error: ${reason}`);\n        });\n    }\n    let comp = {};\n    return comp;\n  }\n\n  getBelNanopub(id) {\n\n    let token = this.auth.getToken();\n\n    return this.apiClient.fetch(`/nanopubs/${id}`)\n      .then(response => response.json())\n      .then(data => {\n        let nanopub = data.nanopub;\n        return nanopub;\n      })\n      .catch(function(reason) {\n        logger.error(`GET BEL Nanopub Error: ${reason}`);\n      });\n  }\n\n  /**\n   * Load BEL Nanopub (POST or PUT)\n   *\n   * @param id\n   * @param nanopub\n   */\n  loadBelNanopub(nanopub, id) {\n\n    // Update Nanopub given an Id\n    if (id) {\n      return this.apiClient.fetch(`/nanopubs/${id}`, {\n        method: 'put',\n        headers: {\n          'Accept': 'application/hal+json',\n          'Content-Type': 'application/json; profile=http://next.belframework.org/schema/nanopub.schema.json'\n\n        },\n        body: JSON.stringify(nanopub)\n      }).catch(response => {\n        logger.error('PUT Nanopub error ', response);\n      });\n    }\n\n    // Create new Nanopub\n    return this.apiClient.fetch(`/nanopubs`, {\n      method: 'post',\n      headers: {\n        'Accept': 'application/hal+json',\n        'Content-Type': 'application/json; profile=http://next.belframework.org/schema/nanopub.schema.json'\n      },\n      body: JSON.stringify(nanopub)\n    }).catch(response => {\n      logger.error('POST Nanopub error ', response);\n    });\n  }\n\n  deleteBelNanopub(nanopubId) {\n\n    return this.apiClient.fetch(`/nanopubs/${nanopubId}`, {\n      method: 'delete',\n      headers: {\n        'Accept': 'application/hal+json',\n        'Content-Type': 'application/json; profile=http://next.belframework.org/schema/nanopub.schema.json'\n      }\n    })\n    .catch(function(reason) {\n      logger.error(`DELETE BEL Nanopub Error: `, reason);\n    });\n  }\n\n  // Get list of all BEL Annotation Resources\n  getBelAnnotationTypes() {\n    return this.apiClient.fetch('/annotations')\n      .then(response => response.json())\n      .then(data => data.annotation_collection)\n      .catch(function(reason) {\n        logger.error(`GET BEL Annotation Types Error: ${reason}`);\n      });\n  }\n\n  // Get BEL Annotation values for the edit form typeahead\n  //   the query string should be wildcarded on the OpenBEL API side (e.g. 'ho sap' -> 'ho* sap*')\n  /* eslint-disable camelcase */\n  getBELAnnotationValues(query, annotation_type) {\n    let numResults = 10;\n    let query_string = '';\n\n    if (annotation_type) {\n      query_string = `/annotations/${annotation_type}/values?filter={\"category\":\"fts\",\"name\":\"search\",\"value\":\"${query}\"}&start=0&size=${numResults}`;\n    } else {\n      query_string = `/annotations/values?filter={\"category\":\"fts\",\"name\":\"search\",\"value\":\"${query}\"}&start=0&size=${numResults}`;\n    }\n\n    return this.apiClient.fetch(query_string)\n      .then(response => response.json())\n      .then(data => data.annotation_value_collection)\n      .catch(function(reason) {\n        logger.error(`GET BEL Annotation Values Error: ${reason}`);\n      });\n  }\n  /* eslint-enable camelcase */\n\n  // Get BEL term completions for the edit form typeahead\n  getBelCompletions(query, cursor) {\n    return this.apiClient.fetch(`/expressions/${query}/completions?caret_position=${cursor}`)\n      .then(response => {\n        return response.json();\n      })\n      .then(json => {\n        let data = json.completion_collection;\n        // logger.debug('Data: ', data);\n        let completions = this.processBelCompletions(query, data);\n        // logger.debug('Completions: ', completions);\n        return completions;\n      })\n      .catch(reason => {\n        // TODO handle 404's - since they are correct - just no term found\n        logger.error('GET Bel Completions error: ', reason);\n      });\n  }\n\n  processBelCompletions(query, data) {\n    let results = [];\n    // logger.debug('Data: ', data);\n    for (let d of data) {\n      // logger.debug('d: ', d);\n      let bel = query.slice(0);\n      let cursor = 0;\n      if (d.completion.actions) {\n        for (let action of d.completion.actions) {\n          // logger.debug('Action: ', action);\n          let len = bel.length;\n          let front = '';\n          let back = '';\n          if (action.delete) {\n            if (action.delete.start_position > 0) {\n              front = bel.slice(0, action.delete.start_position);\n            }\n            if (action.delete.end_position < len) {\n              back = bel.slice(action.delete.end_position + 1);\n            }\n            bel = front + back;\n          }\n\n          if (action.insert) {\n            if (action.insert.position > 0) {\n              front = bel.slice(0, action.insert.position);\n            }\n            if (action.insert.position < len) {\n              back = bel.slice(action.insert.position);\n            }\n            bel = front + d.completion.value + back;\n          }\n\n          if (action.move_cursor) {\n            cursor = action.move_cursor.position;\n          }\n\n          // logger.debug('F: ', front, ' B: ', back, ' BEL: ', bel, ' T: ', d.completion.type, ' Label: ', d.completion.label, ' Val: ', d.completion.value);\n        }\n\n        let classType = '';\n        if (d.completion.type === 'namespace_value') {\n          classType = 'nsval';\n        } else if (d.completion.type === 'namespace_identifier') {\n          classType = 'nsid';\n        } else if (d.completion.type === 'function') {\n          classType = 'function';\n        }\n\n        if (d.completion.label !== d.completion.value) {\n          results.push({term: bel, type: classType, label: d.completion.label, value: d.completion.value, cursor: cursor});\n        } else {\n          results.push({term: bel, type: classType, value: d.completion.value, cursor: cursor});\n        }\n      }\n    }\n    return results;\n  }\n\n  // Upload BEL Script to OpenBEL Nanopub Store\n  // Notes:\n  //    https://github.com/github/fetch\n  //    http://blog.gospodarets.com/fetch_in_action/\n  //    http://www.petermorlion.com/file-upload-with-aurelia/\n\n  uploadDataset(file) {\n    let data = new FormData();\n    data.append('file', file);\n\n    return this.apiClient.fetch('/datasets', {\n      method: 'post',\n      body: data\n    });\n  }\n\n  // TODO remove getNanopubId in favor of getIdFromUrl\n  //\n  /**\n   * Get Nanopub ID from self link href in nanopub object\n   *\n   * @param url\n   * @returns nanopubID\n   */\n  getNanopubId(url) {\n    let matches = url.match(/\\/(\\w+?)$/);\n    // logger.debug('Matches: ', matches[1]);\n    return matches[1];\n  }\n\n    /**\n   * Get ID from self link href\n   *\n   * @param url\n   * @returns ID\n   */\n  getIdFromUrl(url) {\n    // logger.debug('U: ', url);\n    let matches = url.match(/\\/([\\-\\w]*)$/);\n    // logger.debug('Matches: ', matches);\n    return matches[1];\n  }\n\n  getDatasets() {\n    return this.apiClient.fetch('/datasets')\n      .then(response => response.json())\n      .then(data => {return data.dataset_collection;})\n      .catch(function(reason) {\n        logger.error('GET Datasets Error: ', reason);\n      });\n  }\n\n  getRelationships() {\n    return this.apiClient.fetch('/language/relationships')\n      .then(response => response.json())\n      .then(data => {\n        logger.debug('Relationships: ', data.relationship_collection);\n        return data.relationship_collection;\n      })\n      .catch(function(reason) {\n        logger.error('GET Relationships Error: ', reason);\n      });\n  }\n\n  getBelVersion() {\n    return this.apiClient.fetch('/language/version')\n      .then(response => response.json())\n      .then(data => {\n        return data.bel_version.string;\n      })\n      .catch(function(reason) {\n        logger.error('GET BEL Version Error: ', reason);\n      });\n  }\n\n  deleteDataset(url) {\n    let dId = this.getIdFromUrl(url);\n    return this.apiClient.fetch(`/datasets/${dId}`, { method: 'DELETE'})\n      .then(response => {\n        return response;\n      }).catch(function(reason) {\n        logger.error('Delete Datasets Error: ', reason);\n      });\n  }\n\n  // Does the API require authentication? - used to indicate whether to show login link\n  authEnabled() {\n    let authEnabledAPI = '/authentication-enabled';\n    return this.apiClient.fetch(authEnabledAPI)\n      .then(data => data.json())\n      .then(data => {\n        return data.enabled;\n      }).catch(function(reason) {\n        logger.error('authentication-enabled error: ', reason);\n      });\n  }\n}\n","import {HttpClient} from 'aurelia-fetch-client';\nimport {LogManager} from 'aurelia-framework';\n// import Config from '../AppConfig';\nimport {Configure} from 'aurelia-configuration';\n\nlet logger = LogManager.getLogger('pubmed-client');\n\n// let pubmedBaseUrl = Config.pubmedBaseUrl;\n\nexport class PubmedClient {\n  client;\n  pubmedBaseUrl;\n\n  static inject = [Configure];\n  constructor (config) {\n    this.config = config;\n    this.pubmedBaseUrl = this.config.get('pubmedBaseUrl');\n\n    this.client = new HttpClient();\n    this.client.configure(config => {\n      config\n        .withBaseUrl(this.pubmedBaseUrl)\n        .withDefaults({\n          headers: {\n            'Accept': 'application/json',\n            'X-Requested-With': 'Fetch'\n          }\n        })\n        .rejectErrorResponses()\n        .withInterceptor({\n          request(req) {\n            logger.debug(`Requesting ${req.method} ${req.url}`);\n            return req; // you can return a modified Request, or you can short-circuit the request by returning a\n            // Response\n          },\n          response(resp) {\n            logger.debug(`Received ${resp.status} ${resp.url}`);\n            return resp; // you can return a modified Response\n          }\n        });\n    });\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {PubmedClient} from './pubmed-client';\n\nimport {LogManager} from 'aurelia-framework';\nlet logger = LogManager.getLogger('pubmed');\n\n@inject(PubmedClient)\nexport class PubmedService {\n\n  constructor(PubmedClient) {\n    this.client = PubmedClient.client;\n  }\n\n  /**\n   * Get Pubmed document information - e.g. title, abstract, etc.\n   *\n   * @param id\n   * @returns {*}\n   */\n  getPubmed(id) {\n    let getstring = `?resulttype=core&format=json&query=ext_id:${id} src:med`;\n\n    return this.client.fetch(getstring)\n      .then(response => response.json())\n      .then(data => {\n        return data.resultList.result[0];\n      })\n      .then(pubmed => {\n        if (pubmed) {\n          pubmed = this.enhancePubmed(pubmed);\n        }\n        return pubmed;\n      })\n      .catch(response => {\n        logger.error(`GET Pubmed Error: `, response);\n      });\n  }\n\n  enhancePubmed(pubmed) {\n    pubmed.bel = {'mismatch': {'date': false, 'refString': false, 'authors': false, 'comment': false}};\n    // Add reference string - e.g. J Lipid Res 2002 Jan 43(1) 2-12\n    pubmed.bel.refString = pubmed.journalInfo.journal.isoabbreviation;\n    pubmed.bel.refString += `, ${pubmed.journalInfo.dateOfPublication},`;\n    pubmed.bel.refString += ` ${pubmed.journalInfo.volume}`;\n    if (pubmed.journalInfo.issue) {\n      pubmed.bel.refString += `(${pubmed.journalInfo.issue})`;\n    }\n    pubmed.bel.refString += ` p:${pubmed.pageInfo}`;\n\n    // Adjust authors string to the BEL Nanopub format - convert ',' to '|'\n    // pubmed.bel.authors = pubmed.authorString.replace(/,/g , '|').replace(/\\.$/, '');  old version - authors in BEL Nanopub is now an array\n    pubmed.bel.authors = pubmed.authorList.author.map(obj => {return obj.fullName;});\n\n    return pubmed;\n\n  }\n\n}\n","// BEL Relations\nexport const relationsList = [\n  {\n    label: 'increases',\n    value: 'increases'\n  },\n  {\n    label: 'decreases',\n    value: 'decreases'\n  },\n  {\n    label: 'directlyIncreases',\n    value: 'directlyIncreases'\n  },\n  {\n    label: 'directlyDecreases',\n    value: 'directlyDecreases'\n  },\n  {\n    label: 'causesNoChange',\n    value: 'causesNoChange'\n  },\n  {\n    label: 'positiveCorrelation',\n    value: 'positiveCorrelation'\n  },\n\t{\n    label: 'negativeCorrelation',\n    value: 'negativeCorrelation'\n  },\n\t{\n    label: 'translatedTo',\n    value: 'translatedTo'\n  },\n\t{\n    label: 'transcribedTo',\n    value: 'transcribedTo'\n  },\n\t{\n    label: 'isA',\n    value: 'isA'\n  },\n\t{\n    label: 'subProcessOf',\n    value: 'subProcessOf'\n  },\n\t{\n    label: 'rateLimitingStepOf',\n    value: 'rateLimitingStepOf'\n  },\n\t{\n    label: 'biomarkerFor',\n    value: 'biomarkerFor'\n  },\n\t{\n    label: 'prognosticBiomarkerFor',\n    value: 'prognosticBiomarkerFor'\n  },\n\t{\n    label: 'orthologous',\n    value: 'orthologous'\n  },\n\t{\n    label: 'analogous',\n    value: 'analogous'\n  },\n\t{\n    label: 'association',\n    value: 'association'\n  },\n\t{\n    label: 'hasMembers',\n    value: 'hasMembers'\n  },\n\t{\n    label: 'hasComponents',\n    value: 'hasComponents'\n  },\n\t{\n    label: 'hasMember',\n    value: 'hasMember'\n  },\n\t{\n    label: 'hasComponent',\n    value: 'hasComponent'\n  },\n\t{\n    label: 'actsIn',\n    value: 'actsIn'\n  },\n\t{\n    label: 'includes',\n    value: 'includes'\n  },\n\t{\n    label: 'translocates',\n    value: 'translocates'\n  },\n\t{\n    label: 'hasProduct',\n    value: 'hasProduct'\n  },\n\t{\n    label: 'reactantIn',\n    value: 'reactantIn'\n  },\n\t{\n    label: 'hasModification',\n    value: 'hasModification'\n  },\n\t{\n    label: 'hasVariant',\n    value: 'hasVariant'\n  }\n];\n","import {LogManager} from 'aurelia-framework';\nlet logger = LogManager.getLogger('aboutuspage');\nlogger.debug('In about.js');\n\nexport class About{\n\n  builders = [\n    {'name': 'Anthony Bargnesi', 'email': 'abargnesi@selventa.com'},\n    {'name': 'Nick Bargnesi', 'email': 'nbargnesi@selventa.com'},\n    {'name': 'William Hayes', 'email': 'whayes@selventa.com'},\n    {'name': 'Kelly McCann', 'email': 'kmccann@selventa.com'}\n  ];\n\n  consultants = [\n    {'name': 'Anselmo Di Fabio', 'email': 'adifabio@ads-llc.com', 'org': 'ADS Consulting'},\n    {'name': 'Grant Shih', 'email': 'gshih@ads-llc.com',  'org': 'ADS Consulting'},\n    {'name': 'Patrick Walters', 'email': 'patrickwaltersc21@gmail.com',  'org': 'Durandal Inc'}\n  ];\n\n\n}\n","import {Configure} from 'aurelia-configuration';\nimport {LogManager, BindingEngine} from 'aurelia-framework';\nimport {EventAggregator} from 'aurelia-event-aggregator';\n\nlet logger = LogManager.getLogger('apilist');\nlogger.debug('In apilist.js');\n\nexport class ApiList{\n  presetAPIs;\n  userAPIs;\n  selectedAPI;\n\n  userEnteredURL;\n  userEnteredAPIName;\n\n  static inject = [Configure, EventAggregator];\n  constructor(config, ea) {\n    this.config = config;\n    this.ea = ea;\n\n    this.presetAPIs = this.config.get('openbelApiUrls');\n    this.userAPIs = [];\n    var storedUserAPIs = localStorage.getItem('userAPIs');\n    if (storedUserAPIs) {\n      try {\n          this.userAPIs = JSON.parse(storedUserAPIs);\n      } catch (e) {\n          // couldn't parse as JSON, remove it\n          localStorage.removeItem('userAPIs');\n      }\n    }\n\n    var storedSelectedAPIJSON = localStorage.getItem('selectedAPI');\n    var storedSelectedAPI = null;\n    if (storedSelectedAPIJSON) {\n      try {\n        storedSelectedAPI = JSON.parse(storedSelectedAPIJSON);\n      } catch (e) {\n          // couldn't parse as JSON, remove it\n          localStorage.removeItem('selectedAPI');\n      }\n    }\n\n    if (storedSelectedAPI === null) {\n      // set a default\n      this.selectedAPI = this.presetAPIs[0];\n    } else {\n      // is the stored selected API still valid?\n      let selectedName = storedSelectedAPI.name;\n      let selectedURL = storedSelectedAPI.api;\n      for (const apiobj of [...this.presetAPIs, ...this.userAPIs]) {\n        let aoName = apiobj.name;\n        let aoURL = apiobj.api;\n        if (aoName == selectedName && aoURL == selectedURL) {\n          // found it, restore the selection\n          this.selectedAPI = apiobj;\n          break;\n        }\n      }\n    }\n    this.store();\n  }\n\n  changedAPI(apiobj) {\n    this.store();\n    this.ea.publish('selectedOpenbelApiUrl', apiobj);\n  }\n\n  addUserAPI() {\n    var api = {api: this.userEnteredURL, name: this.userEnteredAPIName};\n    this.userAPIs.push(api);\n    this.store();\n    this.userEnteredURL = '';\n    this.userEnteredAPIName = '';\n  }\n\n  removeUserAPI(index) {\n    this.userAPIs.splice(index, 1);\n    this.store();\n  }\n\n  store() {\n    localStorage.setItem('userAPIs', JSON.stringify(this.userAPIs));\n    localStorage.setItem('selectedAPI', JSON.stringify(this.selectedAPI));\n  }\n\n}\n","import {LogManager} from 'aurelia-framework';\nimport {User} from '../components/User';\nimport {Authentication} from '../resources/authentication';\n\nlet logger = LogManager.getLogger('edit');\nlogger.debug('In edit.js');\n\nexport class Edit{\n\n  nanopubId = null;\n  authEnabled = false;\n  static inject() { return [User, Authentication]; }\n  constructor (user, auth) {\n    this.userData = user;\n    this.auth = auth;\n\n    // Authenticate if needed so user doesn't create a new bel nanopub and lose it when OpenBEL API requires authentication\n    if (this.userData.authEnabled && !this.auth.checkToken()) {\n      this.auth.authenticate(window.location.protocol, window.location.host, window.location.pathname, window.location.hash);\n    }\n  }\n\n  activate(params) {\n    if (params.id) {\n      this.nanopubId = params.id;\n    }\n  }\n}\n","export class Help{\n\n}\n","import { LogManager } from 'aurelia-framework';\nimport { OpenbelapiService } from '../resources/openbelapi-service';\nimport { Authentication } from '../resources/authentication';\nimport * as toastr from \"toastr\";\n\nlet logger = LogManager.getLogger('import');\nlogger.debug('In import.js');\n// Notes:\n//    https://github.com/github/fetch\n//    http://blog.gospodarets.com/fetch_in_action/\n//    http://www.petermorlion.com/file-upload-with-aurelia/\n\n\nexport class Import {\n    heading = 'Upload your BEL Script into the BEL Nanopub Repository';\n\n    belFiles;\n    datasets;\n    tokenParam;\n    loading = false; // todo set a spinner state while loading dataset\n    uploadFn = '';\n\n    static inject() { return [OpenbelapiService, Authentication]; }\n    constructor(openbelapiService, authentication) {\n        this.api = openbelapiService;\n        this.auth = authentication;\n    }\n\n    // TODO test authenticated download of datasets\n    activate() {\n        let token = null;\n        if (this.auth) {\n          token = this.auth.getToken();\n        }\n\n        if (token) {\n            this.tokenParam = '&token=' + token;\n        }\n\n        return this.api.getDatasets().then(data => {\n                this.datasets = data;\n                logger.debug('Datasets: ', this.datasets);\n\n            })\n            .catch(function(reason) {\n                logger.error(`GET import datasets Error: ${reason}`)\n            });\n    }\n\n    upload() {\n        this.loading = true;\n        logger.debug('Loading: ', this.loading);\n\n        // logger.debug('File blob: ', this.belFiles);\n        this.api.uploadDataset(this.belFiles[0]).then(response => {\n                let data = { \"location\": null, \"msg\": '' };\n                if (response.ok) {\n                    data.location = response.headers.get(\"Location\");\n                    // logger.debug(\"Import location \", data.location);\n                    toastr.success('', 'Dataset Loaded');\n\n                    this.api.getDatasets().then(data => {\n                        this.datasets = data;\n                    });\n                }\n                this.loading = false;\n            })\n            .catch(response => {\n                if (response.status === 409) {\n                    let json = response.json();\n                    // logger.debug(\"JSON \", json);\n                    toastr.options = { \"timeOut\": \"15000\" };\n                    toastr.error(json.msg, 'Duplicate Dataset');\n                    toastr.options = { \"timeOut\": \"5000\" };\n                } else {\n                    logger.error('Problem loading dataset ', response);\n                    let json = response.json();\n                    toastr.error(json.msg, 'Failed to upload dataset (status ' + response.status + ')');\n                }\n                this.loading = false;\n            });\n        logger.debug('Loading: ', this.loading);\n\n    }\n\n    delete(url, idx) {\n        this.api.deleteDataset(url);\n        this.datasets.splice(idx, 1)\n        var deleteModal = document.getElementById('deleter');\n        deleteModal.setAttribute('class', 'modal fade');\n    }\n\n    belFilesChanged() {\n        logger.debug('belFilesChanged belfiles ', this.belFiles);\n        if (this.belFiles) {\n            this.uploadFn = this.belFiles[0].name;\n            logger.debug('fn: ', this.uploadFn);\n        } else {\n            this.uploadFn = 'select files:';\n            logger.debug('Upload file DB', this.uploadFn);\n        }\n    }\n\n    deleteConfiramtion() {\n        var getModal = document.getElementById(deleter);\n        var deleteModal = document.getElementById('deleter');\n        deleteModal.setAttribute('class', 'modal fade in');\n    }\n\n    closeDeleter() {\n        var deleteModal = document.getElementById('deleter');\n        deleteModal.setAttribute('class', 'modal fade');\n    }\n}\n","import {OpenbelapiService} from '../resources/openbelapi-service';\nimport {LogManager} from 'aurelia-framework';\n\nlet logger = LogManager.getLogger('search');\nlogger.debug('In search.js');\n\nexport class Search {\n\n  filters;\n  searchUrl = null;\n  searching = false;\n\n  static inject() { return [OpenbelapiService]; }\n\n  constructor(openbelapiService) {\n    this.api = openbelapiService;\n    this.results = null;\n    this.selectedFacets = {};\n    this.searchTerms = null;\n    this.searchStart = 0;\n    if (! localStorage.getItem('belMgrSearchSize')) {\n      this.searchSize = \"10\";\n    }\n    else {\n      this.searchSize = localStorage.getItem('belMgrSearchSize');\n    }\n    this.searchFaceted = 1;\n\n    this.nanopubs = [];\n    this.facetSets = {};\n  }\n\n  activate() {\n    // Get initial search results\n    this.search();  // returns a promise to get all of the data needed\n  }\n\n  search(start) {\n//    logger.debug(JSON.stringify(this.selectedFacets, null, 2));\n//    logger.debug('Search terms: ', this.searchTerms);\n    if (typeof(start) != 'undefined') {\n        this.searchStart = start;\n    }\n\n    this.filters = []; // filters to send to api.search\n    if (this.selectedFacets) {\n      let keys = Object.keys(this.selectedFacets);\n      for (let key of keys) {\n          if (this.selectedFacets[key]) {\n          this.filters.push(key);\n        }\n      }\n    }\n\n    if (this.searchTerms) {\n      this.filters.push(`{\"category\":\"fts\",\"name\":\"search\",\"value\":\"${this.searchTerms}\"}`);\n    }\n    logger.debug('Filters: ', this.filters);\n\n    this.searching = true;\n    return this.api.search(this.searchStart, this.searchSize, this.searchFaceted, this.filters)\n      .then(data => {\n        logger.debug('Search result data: ', data);\n        this.searchUrl = data.searchUrl;\n        this.nanopubs =  data.nanopubs;\n        this.facetSets = data.facets;\n        this.search_metadata = data.metadata.collection_paging;\n        let start_page = this.search_metadata.current_page;\n        let end_page = this.search_metadata.total_pages;\n\n        // Pagination setup\n        this.pagerPrevious = this.pagerNext = '';\n        if (!!this.search_metadata) {\n          if (this.search_metadata.current_page === 1) {this.pagerPrevious = 'disabled';}\n          if (this.search_metadata.current_page === this.search_metadata.total_pages) {this.pagerNext = 'disabled';}\n          this.searchStart = (Number(this.search_metadata.current_page) - 1) * Number(this.search_metadata.current_page_size) + 1;\n          this.searchResultsRange = `${start_page} of ${end_page}`;\n        }\n        else {\n          this.searching = false;\n          return data = {};\n        }\n\n        logger.debug(\"Search results: \", this.nanopubs);\n        logger.debug(\"Search facets: \", this.facetSets);\n\n        this.searching = false;\n        return data;\n      })\n      .catch(function(reason) {\n        logger.error('Search error ', reason);\n      });\n\n  }\n\n  /**\n   * Save Search results size in local storage\n   */\n  saveSearchSize() {\n    if (this.searchSize <= 100) {\n      localStorage.setItem('belMgrSearchSize', this.searchSize.toString());\n    }\n    this.search();\n  }\n\n  /**\n   *\n   * @param direction\n   */\n  pageSearchResults(direction) {\n    this.searchStart += Number(this.searchSize) * direction;\n    this.search();\n  }\n\n\n  deleteNanopub(nanopubUrl, idx) {\n    let nanopubId = this.api.getNanopubId(nanopubUrl);\n    this.api.deleteBelNanopub(nanopubId);\n    this.nanopubs.splice(idx, 1);\n    var deleteModal = document.getElementById(\"deleter\");\n    deleteModal.setAttribute(\"class\", \"modal fade\");\n  }\n\n  deleteConfiramtion() {\n    var deleteModal = document.getElementById(\"deleter\");\n    var modalFade = document.getElementByClassName(\"modal-backdrop\");\n    deleteModal.setAttribute(\"class\", \"modal fade in\");\n    modalFade.setAttribute(\"class\", \"modal-backdrop fade\");\n  };\n  closeDeleter() {\n    var deleteModal = document.getElementById(\"deleter\");\n    var modalFade = document.getElementByClassName(\"modal-backdrop\");\n    deleteModal.setAttribute(\"class\", \"modal fade\");\n    odalFade.setAttribute(\"class\", \"modal-backdrop fade\");\n  };\n  /**\n   * Get Species from Nanopub Experiment Context\n   * @param nanopub\n   * @returns 'Genus species'\n   */\n\n  // getSpecies(nanopub) {\n  //   let default_val = 'Unknown';\n  //   let item = nanopub.experiment_context.find(x => x.name === 'Ncbi Taxonomy');\n  //   if (item) {\n  //     return item.value;\n  //   }\n  //   return default_val;\n  // }\n\n  getSpeciesIcon(item) {\n    let organisms = {\n      \"Mus musculus\": \"mouse-icon\",\n      \"10090\": \"mouse-icon\",\n      \"Rattus norvegicus\": \"rat-icon\",\n      \"10116\": \"rat-icon\",\n      \"Homo sapiens\": \"human-icon\",\n      \"9606\": \"human-icon\",\n      \"Unknown\": \"unknown-icon\"\n    }\n    let result = item.nanopub.experiment_context.find(x => x.name === 'Species');\n    if (result) {\n      return organisms[result.value];\n    }\n    return organisms.Unknown;\n  }\n\n  /**\n   * Creates array of experiment_context values without the Ncbi Taxonomy item\n   * @param nanopub\n   * @returns array of experiment_context values\n   */\n  getExperimentContextItems(nanopub) {\n    let items = nanopub.experiment_context.filter(x => x.name !== 'Ncbi Taxonomy').map(x => `${x.name}::${x.value}`);\n    return items;\n  }\n\n}\n\n","import {LogManager} from 'aurelia-framework';\nlet logger = LogManager.getLogger('welcomepage');\nlogger.debug('In welcome.js');\n\nexport class Welcome{\n  builders = [\n    {'name': 'Anthony Bargnesi', 'email': 'abargnesi@selventa.com'},\n    {'name': 'Nick Bargnesi', 'email': 'nbargnesi@selventa.com'},\n    {'name': 'William Hayes', 'email': 'whayes@selventa.com'},\n    {'name': 'Kelly McCann', 'email': 'kmccann@selventa.com'}\n  ];\n\n  consultants = [\n    {'name': 'Anselmo Di Fabio', 'email': 'adifabio@ads-llc.com', 'org': 'ADS Consulting'},\n    {'name': 'Grant Shih', 'email': 'gshih@ads-llc.com',  'org': 'ADS Consulting'},\n    {'name': 'Patrick Walters', 'email': 'patrickwaltersc21@gmail.com',  'org': 'Durandal Inc'}\n  ];\n\n\n}\n","/**\n * Convert from text string delimited by ';' in View to an array in the VM\n *\n * Usage:\n *  <require from=\"arrayify\"></require>\n *  <pre>${string | arrayify}</pre>\n *\n */\nexport class ArrayifyValueConverter {\n  toView(array) {\n    let text = \"\";\n    if (array) {\n      text = array.join('; ');\n    }\n    return text;\n  }\n  fromView(text) {\n    let array = [];\n    if (text) {\n      array = text.split('; ');\n    }\n    return array;\n  }\n}\n","/**\n * Extract keys from object for use in repeat.for loop\n *\n * Usage:\n *\n *   <require from=\"keys-to-list\"></require>\n *   ' | keys'\n *\n */\nexport class KeysValueConverter {\n\n  /**\n   * To View method\n   *\n   * @param {Object} object to extract keys from\n   * @return {array} list of keys\n   */\n  toView(object){\n    return Object.keys(object).sort();\n  }\n}\n","/**\n * Convert authors delimited by ';' on Edit BEL page to '|' for storage\n *\n * Usage:\n *   <require from=\"pipe-to-semicolon\"></require>\n *   ${object | semiToPipe}\n */\n\nexport class SemiToPipeValueConverter {\n  toView(text) {\n    if (text) {\n      text = text.replace(/\\|/g, ';');\n    }\n    return text;\n\n  }\n  fromView(text) {\n    if (text) {\n      text = text.replace(/\\;/g, '|');\n    }\n    return text;\n  }\n}\n","/**\n * Sort array value converter\n */\nexport class SortValueConverter {\n\n  toView(array) {\n    console.log('Array: ', array);\n    return array.sort();\n  }\n}\n","/**\n * Convert Object to pretty-printed JSON string to insert into the VIEW\n *\n * Usage:\n *\n * <require from=\"stringify\"></require>\n * <pre>${object | stringify}</pre>\n */\n\nexport class StringifyValueConverter {\n  toView(object) {\n    return JSON.stringify(object, null, 2);\n  }\n}\n"],"sourceRoot":"../src"}